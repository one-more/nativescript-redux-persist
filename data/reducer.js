"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var couchbase_1 = require("../services/couchbase");
var persistKey = "persist-state-key";
function persist(state) {
    setTimeout(function () {
        couchbase_1.writeToDocument(persistKey, state);
    });
    return state;
}
function preloadState() {
    return couchbase_1.readFromDocument(persistKey);
}
exports.preloadState = preloadState;
function persistReducer(reducer) {
    return function (state, action) {
        return persist(reducer(state, action));
    };
}
exports.persistReducer = persistReducer;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVkdWNlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInJlZHVjZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFDQSxtREFBd0U7QUFFeEUsSUFBTSxVQUFVLEdBQUcsbUJBQW1CLENBQUM7QUFFdkMsU0FBUyxPQUFPLENBQUMsS0FBYTtJQUMxQixVQUFVLENBQUM7UUFDUCwyQkFBZSxDQUFDLFVBQVUsRUFBRSxLQUFLLENBQUMsQ0FBQTtJQUN0QyxDQUFDLENBQUMsQ0FBQztJQUNILE9BQU8sS0FBSyxDQUFBO0FBQ2hCLENBQUM7QUFFRCxTQUFnQixZQUFZO0lBQ3hCLE9BQU8sNEJBQWdCLENBQUMsVUFBVSxDQUFDLENBQUE7QUFDdkMsQ0FBQztBQUZELG9DQUVDO0FBRUQsU0FBZ0IsY0FBYyxDQUFDLE9BQU87SUFDbEMsT0FBTyxVQUFDLEtBQUssRUFBRSxNQUFjO1FBQ3pCLE9BQU8sT0FBTyxDQUNWLE9BQU8sQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQ3pCLENBQUE7SUFDTCxDQUFDLENBQUE7QUFDTCxDQUFDO0FBTkQsd0NBTUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0FjdGlvbn0gZnJvbSBcInJlZHV4XCI7XG5pbXBvcnQge3JlYWRGcm9tRG9jdW1lbnQsIHdyaXRlVG9Eb2N1bWVudH0gZnJvbSBcIi4uL3NlcnZpY2VzL2NvdWNoYmFzZVwiO1xuXG5jb25zdCBwZXJzaXN0S2V5ID0gXCJwZXJzaXN0LXN0YXRlLWtleVwiO1xuXG5mdW5jdGlvbiBwZXJzaXN0KHN0YXRlOiBPYmplY3QpIHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgd3JpdGVUb0RvY3VtZW50KHBlcnNpc3RLZXksIHN0YXRlKVxuICAgIH0pO1xuICAgIHJldHVybiBzdGF0ZVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcHJlbG9hZFN0YXRlKCkge1xuICAgIHJldHVybiByZWFkRnJvbURvY3VtZW50KHBlcnNpc3RLZXkpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwZXJzaXN0UmVkdWNlcihyZWR1Y2VyKSB7XG4gICAgcmV0dXJuIChzdGF0ZSwgYWN0aW9uOiBBY3Rpb24pID0+IHtcbiAgICAgICAgcmV0dXJuIHBlcnNpc3QoXG4gICAgICAgICAgICByZWR1Y2VyKHN0YXRlLCBhY3Rpb24pXG4gICAgICAgIClcbiAgICB9XG59Il19